FROM node:14.17.6-alpine3.12

WORKDIR /usr/src/app

COPY package*.json ./

RUN npm install

ARG REACT_APP_PORT
ARG REACT_APP_MQTT_BROKER
ARG REACT_APP_MQTT_PORT
ARG REACT_APP_MQTT_WEBSOCKET_PORT

ENV REACT_APP_PORT=$REACT_APP_PORT
ENV REACT_APP_MQTT_BROKER=$REACT_APP_MQTT_BROKER
ENV REACT_APP_MQTT_PORT=$REACT_APP_MQTT_PORT
ENV REACT_APP_MQTT_WEBSOCKET_PORT=$REACT_APP_MQTT_WEBSOCKET_PORT

COPY . .