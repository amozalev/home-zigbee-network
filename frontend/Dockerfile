FROM node:14.17.6-alpine3.12

WORKDIR /usr/src/app

COPY package*.json ./

RUN npm install

ARG REACT_APP_PORT
ARG REACT_APP_MQTT_BROKER_HOST
ARG REACT_APP_MQTT_BROKER_WS_PORT
ARG REACT_APP_DEFAULT_TOPIC

ENV REACT_APP_PORT=$REACT_APP_PORT
ENV REACT_APP_MQTT_BROKER_HOST=$REACT_APP_MQTT_BROKER_HOST
ENV REACT_APP_MQTT_BROKER_WS_PORT=$REACT_APP_MQTT_BROKER_WS_PORT
ENV REACT_APP_DEFAULT_TOPIC=$REACT_APP_DEFAULT_TOPIC

COPY . .